{% extends 'base.html' %}

{% block title %}Contact Us - Creative Link{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="container-fluid bg-dark text-light py-5">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <h1 class="display-4 fw-bold">Get in Touch</h1>
                <p class="lead">Have questions about our services? Looking for cybersecurity solutions or custom software development? Contact our team today.</p>
            </div>
        </div>
    </div>
</div>

<!-- Contact Section -->
<div class="container my-5">
    <div class="row">
        <div class="col-lg-6 mb-4">
            <h2>Contact Information</h2>
            <hr>
            <div class="d-flex mb-4">
                <div class="flex-shrink-0">
                    <i class="bi bi-geo-alt fs-2 text-primary me-3"></i>
                </div>
                <div>
                    <h5>Office Location</h5>
                    <p>Sonac Street, Bamenda, Cameroon</p>
                </div>
            </div>
            
            <div class="d-flex mb-4">
                <div class="flex-shrink-0">
                    <i class="bi bi-telephone fs-2 text-primary me-3"></i>
                </div>
                <div>
                    <h5>Phone</h5>
                    <p>+237654910514<br>+237680226898</p>
                </div>
            </div>
            
            <div class="d-flex mb-4">
                <div class="flex-shrink-0">
                    <i class="bi bi-envelope fs-2 text-primary me-3"></i>
                </div>
                <div>
                    <h5>Email</h5>
                    <p>info@creativelink.tech<br>support@creativelink.tech</p>
                </div>
            </div>
            
            <div class="d-flex mb-4">
                <div class="flex-shrink-0">
                    <i class="bi bi-clock fs-2 text-primary me-3"></i>
                </div>
                <div>
                    <h5>Hours</h5>
                    <p>Monday - Friday: 9:00 AM - 6:00 PM<br>Saturday: 10:00 AM - 2:00 PM<br>Sunday: Closed</p>
                </div>
            </div>
            
            <div class="mt-5">
                <h4>Connect With Us</h4>
                <div class="d-flex mt-3">
                    <a href="#" class="btn btn-primary btn-lg me-2"><i class="bi bi-linkedin"></i></a>
                    <a href="#" class="btn btn-primary btn-lg me-2"><i class="bi bi-twitter-x"></i></a>
                    <a href="#" class="btn btn-primary btn-lg me-2"><i class="bi bi-facebook"></i></a>
                    <a href="#" class="btn btn-primary btn-lg me-2"><i class="bi bi-github"></i></a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6">
            <div class="card shadow-lg border-0">
                <div class="card-body p-5">
                    <h2 class="card-title mb-4">Send Us a Message</h2>
                    <form id="contactForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="name" class="form-label">Name*</label>
                                <input type="text" class="form-control" id="name" required>
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label">Email*</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="col-md-6">
                                <label for="phone" class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="phone">
                            </div>
                            <div class="col-12">
                                <label for="subject" class="form-label">Subject*</label>
                                <input type="text" class="form-control" id="subject" required>
                            </div>
                            <div class="col-12">
                                <label for="message" class="form-label">Message*</label>
                                <textarea class="form-control" id="message" rows="5" required></textarea>
                            </div>
                            <div class="col-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="privacyPolicy" required>
                                    <label class="form-check-label" for="privacyPolicy">
                                        I agree to the <a href="#">privacy policy</a> and consent to be contacted regarding my inquiry.
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary btn-lg w-100">Submit Message</button>
                            </div>
                            <div id="formResponse" class="mt-3"></div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Map Section -->
<div class="container-fluid px-0 mt-5">
    <div class="map-container">
        <div class="ratio ratio-21x9">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1402.9880955464196!2d10.155673740232304!3d5.960360877503202!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x105f172b20c8d2f9%3A0xa27dc56e2a6d1d66!2sMr3000Bits!5e0!3m2!1sen!2scm!4v1755427082978!5m2!1sen!2scm" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </div>
</div>

<!-- FAQ Section -->
<div class="container my-5">
    <h2 class="text-center mb-4">Frequently Asked Questions</h2>
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            What cybersecurity services does Creative Link offer?
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Creative Link offers comprehensive cybersecurity services including vulnerability assessments, penetration testing, security audits, incident response planning, and managed security services. Our team of certified security experts can help protect your business from evolving cyber threats.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            How quickly can I expect a response after submitting a contact form?
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            We strive to respond to all inquiries within 24 business hours. For urgent matters, we recommend calling our support line directly at +1 (555) 123-4567 for immediate assistance.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Do you provide custom software development services?
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Yes, Creative Link specializes in custom software development tailored to your specific business needs. Our team of experienced developers can create web applications, mobile apps, enterprise software solutions, and integrated systems that streamline your operations and enhance productivity.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                            Can Creative Link help with hardware engineering projects?
                        </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Absolutely! Our hardware engineering team has expertise in designing and developing custom hardware solutions, IoT devices, embedded systems, and electronic prototypes. We can take your hardware project from concept to production with our end-to-end services.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for form validation + sending to backend -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const contactForm = document.getElementById('contactForm');
    const formResponse = document.getElementById('formResponse');

    if (contactForm) {
        contactForm.addEventListener('submit', async function(event) {
            event.preventDefault();

            // Clear previous response
            formResponse.innerHTML = '';

            // Collect form values
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const subject = document.getElementById('subject').value.trim();
            const message = document.getElementById('message').value.trim();
            const phone = document.getElementById('phone').value.trim();

            if (!name || !email || !subject || !message) {
                formResponse.innerHTML = `
                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                        ⚠️ Please fill in all required fields.
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>`;
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                formResponse.innerHTML = `
                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                        ⚠️ Please enter a valid email address.
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>`;
                return;
            }

            const data = { name, email, subject, message, phone };

            try {
                const response = await fetch("/api/contact/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRFToken": getCookie("csrftoken")
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok) {
                    formResponse.innerHTML = `
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                            ✅ <strong>${result.message}</strong><br>
                            Submitted at: ${result.submitted_at}<br>
                            ${result.next_steps}
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>`;
                    contactForm.reset();
                } else {
                    let errorMessages = '';
                    for (const [key, val] of Object.entries(result.errors)) {
                        errorMessages += `<li>${key}: ${val.join(', ')}</li>`;
                    }
                    formResponse.innerHTML = `
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            ❌ There were errors with your submission:
                            <ul>${errorMessages}</ul>
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>`;
                }
            } catch (error) {
                formResponse.innerHTML = `
                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                        ❌ Failed to send message. Please try again later.
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>`;
                console.error(error);
            }
        });
    }

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                cookie = cookie.trim();
                if (cookie.startsWith(name + '=')) {
                    cookieValue = decodeURIComponent(cookie.slice(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
});
</script>



{% endblock %}